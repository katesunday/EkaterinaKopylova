<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ping-pong DOM</title>
</head>
<body>
 
    <style>
        .gameDiv{
            background-color:lightsteelblue;
            border: 1px solid black;
            position: relative;
        }
        .startDiv{
            margin: 10px;
        }
        #racket1{
            background-color: green;
            position: absolute;
        }
        #racket2{
            background-color: blue;
            position: absolute;
        }
        #ball{
            background-color: red;
            border-radius: 50%;
            position: absolute;

        }
      
    </style>
    <script>
        // создание фона игры и переменных
       
        let startDiv = document.createElement('div'); //стартовый див
        startDiv.className = 'startDiv';
        document.body.append(startDiv);

        let startBtn = document.createElement('button');//кнопка старт
        startBtn.className = 'startBtn';
        startBtn.textContent = 'Старт!';
        startDiv.append(startBtn);
        startBtn.addEventListener('click',start);

        let score = document.createElement('span');//табло
        score.className = 'score';
        startDiv.append(score);

        let gameDiv = document.createElement('div');//див самой игры
        gameDiv.className = 'gameDiv';
        let gameWidth = 700;
        let gameHeight = 400;
        gameDiv.style.width = `${gameWidth}px`;
        gameDiv.style.height = `${gameHeight}px`;
        document.body.append(gameDiv);

        var racket1 = document.createElement('div'); //ракетки 
        var racket2 = document.createElement('div');
        racket1.id = 'racket1';
        racket2.id = 'racket2';
        let racketHeight = gameHeight/3;
        let racketWidth = 15;
        racket1.style.cssText = `width:${racketWidth}px;
                                 height:${racketHeight}px;`;
        racket2.style.cssText = `width:${racketWidth}px;
                                 height:${racketHeight}px;`;
        gameDiv.append(racket1);
        gameDiv.append(racket2);
//РАКЕТКА 1
        var r1 = {
        posX : 0,
        posY : gameHeight/2 - racketHeight/2,
        speedY : 1,
        update: function(){
            var racketElem1 = document.getElementById('racket1');
            racketElem1.style.left=this.posX+"px";
            racketElem1.style.top=this.posY+"px";
        }
        }
        r1.update();
// РАКЕТКА 2
        var r2 = {
        posX : gameWidth - racketWidth,
        posY : gameHeight/2 - racketHeight/2,
        speedY : 1,
        update: function(){
            var racketElem2 = document.getElementById('racket2');
            racketElem2.style.left=this.posX+"px";
            racketElem2.style.top=this.posY+"px";
        }
        }
        r2.update();
//МЯЧ
        var ball = document.createElement('div'); //добавили мяч
        ball.id ='ball';
        ball.style.cssText = `width:${gameWidth/15}px;
                             height:${gameWidth/15}px;`;
        gameDiv.append(ball);
        
        var ballH={ //массив значений дл мяча
        posX : gameWidth/2 - ball.offsetWidth/2,
        posY : gameHeight/2 - ball.offsetHeight/2,
        speedX : 3,
        speedY : 1,


        update : function() {// забираем мяч и присваеваем ему значения из массива
            var ballElem=document.getElementById('ball');
            ballElem.style.left=this.posX+"px";
            ballElem.style.top=this.posY+"px";
        }
        }
        ballH.update(); 

        function start(){//  запускается по кнопке старт
            requestAnimationFrame(startGame);
        }
        function startGame(){
            ballH.posX += ballH.speedX;
            if(ballH.posX + ball.offsetWidth>= gameWidth){
                ballH.speedX =- ballH.speedX;
                ballH.posX = gameWidth - ball.offsetWidth;
            } 
            if(ballH.posX<=0){
                ballH.posX = 0;
                ballH.speedX =- ballH.speedX;
            }
            ballH.posY += ballH.speedY;
            if(ballH.posY + ball.offsetHeight>= gameHeight){
                ballH.speedY =- ballH.speedY;
                ballH.posY = gameHeight - ball.offsetHeight;
            }
            if(ballH.posY<=0){
                ballH.posY = 0;
                ballH.speedY =- ballH.speedY;
            }
            ballH.update();
            requestAnimationFrame(startGame);
        }

//движение ракеток
     var moveUp = 0;
     var moveDown = 0;
      window.onkeydown = function moveUpR1(){
          switch(event.keyCode){
          case 38:
            moveUp -= 7;
            racket1.style.top =r1.posY+ moveUp + 'px';
              if(racket1.style.top<=0){
                racket1.style.top =0 + 'px';
              }
              break;
            case 40:
                moveDown += 4;
                racket1.style.top =r1.posY+ moveDown + 'px';
                if(racket1.style.top>=gameHeight){
                    racket1.style.top = gameHeight+'px';
                }
                break;
          }
      }
 
    </script>
</body>
</html>